function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}(function(e,t){"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.InstagramFeed=t()})(this,function(){function e(e){return e.replace(/[&<>"'`=\/]/g,function(e){return o[e]})}var t={host:"https://www.instagram.com/",username:"",tag:"",container:"",display_profile:!0,display_biography:!0,display_gallery:!0,display_igtv:!1,get_data:!1,callback:null,styling:!0,items:8,items_per_row:4,margin:.5,image_size:640},i={150:0,240:1,320:2,480:3,640:4},o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return function(o){this.options=Object.assign({},t),this.options=Object.assign(this.options,o),this.is_tag=""==this.options.username,this.valid=!0,""==this.options.username&&""==this.options.tag?(console.error("InstagramFeed: Error, no username or tag defined."),this.valid=!1):this.options.get_data||""!=this.options.container?this.options.get_data&&"function"!=typeof this.options.callback&&(console.error("InstagramFeed: Error, invalid or undefined callback for get_data"),this.valid=!1):(console.error("InstagramFeed: Error, no container found."),this.valid=!1),this.get=function(e){var t=this.is_tag?this.options.host+"explore/tags/"+this.options.tag:this.options.host+this.options.username,i=new XMLHttpRequest,o=this;i.onload=function(){if(4===i.readyState)if(200===i.status){var s=i.responseText.split("window._sharedData = ")[1].split("</script>")[0];s=JSON.parse(s.substr(0,s.length-1)),s=s.entry_data.ProfilePage||s.entry_data.TagPage||null,null===s?(console.log(t),console.error("InstagramFeed: Request error. No data retrieved: "+i.statusText)):(s=s[0].graphql.user||s[0].graphql.hashtag,e(s,o))}else console.error("InstagramFeed: Request error. Response: "+i.statusText)},i.open("GET",t,!0),i.send()},this.parse_caption=function(e,t){return void 0!==e.node.edge_media_to_caption.edges[0]&&0!=e.node.edge_media_to_caption.edges[0].node.text.length?e.node.edge_media_to_caption.edges[0].node.text:void 0!==e.node.title&&0!=e.node.title.length?e.node.title:void 0!==e.node.accessibility_caption&&0!=e.node.accessibility_caption.length?e.node.accessibility_caption:(this.is_tag?t.name:t.username)+" image "},this.display=function(t){if(this.options.styling)var o=(100-2*this.options.margin*this.options.items_per_row)/this.options.items_per_row,s={profile_container:" style='text-align:center;'",profile_image:" style='border-radius:10em;width:15%;max-width:125px;min-width:50px;'",profile_name:" style='font-size:1.2em;'",profile_biography:" style='font-size:1em;'",gallery_image:" style='margin:"+this.options.margin+"% "+this.options.margin+"%;width:"+o+"%;float:left;'"};else s={profile_container:"",profile_image:"",profile_name:"",profile_biography:"",gallery_image:""};var a="";if(this.options.display_profile&&(a+="<div class='instagram_profile'"+s.profile_container+">",a+="<img class='instagram_profile_image' src='"+t.profile_pic_url+"' alt='"+(this.is_tag?t.name+" tag pic":t.username+" profile pic")+" profile pic'"+s.profile_image+" />",a+=this.is_tag?"<p class='instagram_tag'"+s.profile_name+"><a href='https://www.instagram.com/explore/tags/"+this.options.tag+"' rel='noopener' target='_blank'>#"+this.options.tag+"</a></p>":"<p class='instagram_username'"+s.profile_name+">@"+t.full_name+" (<a href='https://www.instagram.com/"+this.options.username+"' rel='noopener' target='_blank'>@"+this.options.username+"</a>)</p>",!this.is_tag&&this.options.display_biography&&(a+="<p class='instagram_biography'"+s.profile_biography+">"+t.biography+"</p>"),a+="</div>"),this.options.display_gallery){var n=void 0===i[this.options.image_size]?i[640]:i[this.options.image_size];if(void 0!==t.is_private&&!0===t.is_private)a+="<p class='instagram_private'><strong>This profile is private</strong></p>";else{var r=(t.edge_owner_to_timeline_media||t.edge_hashtag_to_media).edges;m=r.length>this.options.items?this.options.items:r.length,a+="<div class='instagram_gallery'>";for(var l=0;l<m;l++){var p,g,d="https://www.instagram.com/p/"+r[l].node.shortcode,h=e(this.parse_caption(r[l],t));switch(r[l].node.__typename){case"GraphSidecar":g="sidecar",p=r[l].node.thumbnail_resources[n].src;break;case"GraphVideo":g="video",p=r[l].node.thumbnail_src;break;default:g="image",p=r[l].node.thumbnail_resources[n].src}this.is_tag&&(t.username=""),a+="<a href='"+d+"' class='instagram-"+g+"' title='"+h+"' rel='noopener' target='_blank'>",a+="<img src='"+p+"' alt='"+h+"'"+s.gallery_image+" />",a+="</a>"}a+="</div>"}}if(this.options.display_igtv&&void 0!==t.edge_felix_video_timeline){var _=t.edge_felix_video_timeline.edges,m=_.length>this.options.items?this.options.items:_.length;if(0<_.length){a+="<div class='instagram_igtv'>";for(l=0;l<m;l++){d="https://www.instagram.com/p/"+_[l].node.shortcode,h=this.parse_caption(_[l],t);a+="<a href='"+d+"' rel='noopener' title='"+h+"' target='_blank'>",a+="<img src='"+_[l].node.thumbnail_src+"' alt='"+h+"'"+s.gallery_image+" />",a+="</a>"}a+="</div>"}}this.options.container.innerHTML=a},this.run=function(){this.get(function(e,t){t.options.get_data?t.options.callback(e):t.display(e)})},this.valid&&this.run()}});